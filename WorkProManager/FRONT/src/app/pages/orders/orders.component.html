<div class="wpm-custom-gradient p-6 rounded-lg shadow-md">
  <div class="contenedor">
    <div *ngIf="authService.getUserId() as rut" class="text-left mb-4">
      <p class="text-center">Bienvenido, usuario con RUT: {{ rut }}</p>
      <h1 class="text-2xl font-bold text-center mb-4">√ìrdenes de Trabajo</h1>
    </div>

    <!-- Filtros -->
    <div class="mb-4">
      <button class="w-full p-2 bg-gray-100 rounded flex justify-between items-center" (click)="toggleMenu('filtrosGenerales')">
        <span>Filtros</span>
        <span>{{ menuAbierto['filtrosGenerales'] ? '‚ñº' : '‚ñ∂' }}</span>
      </button>
      <div [@slideInOut]="menuAbierto['filtrosGenerales']" class="p-4 border rounded bg-gray-50">
        <div class="grid grid-cols-1 gap-4 mt-2">
          <!-- Filtro por estado -->
          <div class="mb-4">
            <button class="w-full p-2 bg-gray-100 rounded flex justify-between items-center" (click)="toggleMenu('filtroEstado')">
              <span>Filtrar por estado</span>
              <span>{{ menuAbierto['filtroEstado'] ? '‚ñº' : '‚ñ∂' }}</span>
            </button>
            <div [@slideInOut]="menuAbierto['filtroEstado']" class="p-2">
              <label for="filterSelect" class="sr-only">Filtrar por estado</label>
              <select id="filterSelect" #filterSelect class="w-full p-2 border rounded mt-2" (change)="filterOrdersByStatus(filterSelect.value)">
                <option value="todas">Todas</option>
                <option value="pendiente">Pendiente</option>
                <option value="en proceso">En proceso</option>
                <option value="incompleto">Incompleto</option>
                <option value="completo">Completo</option>
                <option value="finalizado">Finalizado</option>
                <option value="rechazado">Rechazado</option>
              </select>
            </div>
          </div>
          <!-- Otros filtros... -->
        </div>
      </div>
    </div>

    <!-- Tabla de √≥rdenes -->
    <table class="w-full border-collapse text-center">
      <thead>
        <tr class="bg-gray-200">
          <th class="border p-2">Fecha de entrega</th>
          <th class="border p-2">N√∫mero de serie</th>
          <th class="border p-2">N√∫mero de orden</th>
          <th class="border p-2">Modelo del equipo</th>
          <th class="border p-2">Rut Cliente</th>
          <th class="border p-2">Estado</th>
          <th class="border p-2">Usuario</th>
          <th class="border p-2">Fecha Plazo</th>
          <th class="border p-2">Solicitud Vista</th>
          <th class="border p-2">Operaciones</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="let newOrder of filteredOrders | paginate: { itemsPerPage: itemsPerPage, currentPage: page }"
          [ngClass]="{ 'text-red-600': newOrder.VistaSolicitud.isview == false }"
          class="hover:bg-gray-100"
        >
          <td class="border p-2">{{ newOrder.fec_entrega }}</td>
          <td class="border p-2">{{ newOrder.num_equipo }}</td>
          <td class="border p-2">{{ newOrder.id_ot }}</td>
          <td class="border p-2">{{ newOrder.Equipo.mod_equipo }}</td>
          <td class="border p-2">{{ newOrder.rut_cliente }}</td>
          <td class="border p-2">{{ newOrder.VistaSolicitud.nom_estado_ot }}</td>
          <td class="border p-2">{{ newOrder.Usuario.nom_usu }}</td>
          <td class="border p-2">
            <app-cronometro [fechaPlazo]="newOrder.VistaSolicitud.fecha_plazo | date:'yyyy-MM-ddTHH:mm:ss'"></app-cronometro>
          </td>
          <td class="border p-2">
            <span *ngIf="newOrder.VistaSolicitud.isview">‚úÖ</span>
            <span *ngIf="!newOrder.VistaSolicitud.isview">‚ö†Ô∏è</span>
          </td>
          <td class="border p-2 flex justify-center gap-2">
            <button [routerLink]="['/edit-order', newOrder.id_ot]" class="bg-yellow-500 text-white p-1 rounded">‚úèÔ∏è</button>
            <button (click)="generatePDF(newOrder)" class="bg-blue-500 text-white p-1 rounded">üñ®Ô∏è</button>

          </td>
        </tr>
      </tbody>
    </table>

    <pagination-controls (pageChange)="onPageChange($event)" class="mt-4"
    previousLabel="Anterior" nextLabel="Siguiente"></pagination-controls>
  </div>
</div>
